<main class="content" style="position: relative; top: 25px;">
    <div class="container p-0" style="margin-left: 5%;">
      <h1 class="h3 mb-3">Messages</h1>
  
      <div class="card">
        <div class="row g-0">
  
          <!-- Colonne de gauche vide ou avec info admin -->
          <div class="col-12 col-lg-5 col-xl-3 border-right d-flex flex-column align-items-center justify-content-center text-center p-3">
            <img src="https://bootdey.com/img/Content/avatar/avatar3.png"
                 class="rounded-circle mb-2"
                 width="80"
                 height="80"
                 alt="Admin">
            <h5 class="mb-0">Administrateur</h5>
            <small class="text-muted">Toujours disponible</small>
          </div>
  
          <!-- Zone de chat -->
          <div class="col-12 col-lg-7 col-xl-9">
            <div class="py-2 px-4 border-bottom d-none d-lg-block">
              <div class="d-flex align-items-center py-1">
                <div class="position-relative">
                  <img src="https://bootdey.com/img/Content/avatar/avatar3.png"
                       class="rounded-circle mr-1"
                       width="40" height="40"
                       alt="Admin">
                </div>
                <div class="flex-grow-1 pl-3">
                  <strong>Administrateur</strong>
                  <div class="text-muted small"><em>Online</em></div>
                </div>
              </div>
            </div>
  
            <!-- Messages -->
            <div class="position-relative" style="height: 400px; overflow-y: auto;">
              <div class="chat-messages p-4">
                <div *ngFor="let message of messages"
                [class.chat-message-right]="message.senderId === currentUserId"
                [class.chat-message-left]="message.senderId !== currentUserId"
                class="pb-4">
                <!-- Affichage de debug pour vérifier la condition -->
               
             <div>
                    <img [src]="message.senderId === currentUserId  ? (currentUserAvatar || 'https://bootdey.com/img/Content/avatar/avatar1.png') : 'https://bootdey.com/img/Content/avatar/avatar3.png'"
                         class="rounded-circle mr-1"
                         width="40" height="40"
                         alt="avatar">
                    <div class="text-muted small text-nowrap mt-2">{{ message.timestamp | date:'shortTime' }}</div>
                  </div>
                  <div class="flex-shrink-1 bg-light rounded py-2 px-3"
                       [class.mr-3]="message.senderId === currentUserId "
                       [class.ml-3]="message.senderId !== currentUserId ">
                    <div class="font-weight-bold mb-1">
                      {{ message.senderId === currentUserId  ? 'Moi' : 'Administrateur' }}
                    </div>
                    {{ message.content }} 
                  </div>
                </div>
              </div>
            </div>
  
            <!-- Input message -->
            <div class="flex-grow-0 py-3 px-4 border-top">
              <div class="input-group">
                <input type="text"
                       class="form-control"
                       placeholder="Écrire un message"
                       [(ngModel)]="newMessage">
                <button class="btn btn-primary" (click)="send()">Envoyer</button>
              </div>
            </div>
          </div>
  
        </div>
      </div>
    </div>
  </main>
  